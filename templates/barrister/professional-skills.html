{% extends 'barrister/barrister-base.html' %}

{% load static %}

{% block title %}
<title>Barrister Professional Skills</title>
{% endblock %}

{% block links %}
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://cdn.pixabay.com/photo/2016/07/31/20/54/calendar-1559935_1280.png"
  alt="Изображение Tim Treis с сайта Pixabay " type="image/x-icon" />
<link rel="stylesheet" href="{% static 'vendor/bootstrap.min.css' %}" />
<link rel="stylesheet" href="{% static 'fontawesome/all.css' %}" />
<link rel="stylesheet" href="{% static 'vendor/owl.carousel.css' %}" />
<link rel="stylesheet" href="{% static 'vendor/owl.theme.default.min.css' %}" />
<link rel="stylesheet" href="{% static 'vendor/animate.css' %}" />
<link href="{% static 'vendor/fullcalendar-3.10.0/fullcalendar.min.css' %}" rel="stylesheet" />
<link href="{% static 'vendor/fullcalendar-3.10.0/fullcalendar.print.min.css' %}" rel="stylesheet" media="print" />
<link rel="stylesheet" href="{% static 'css/style.css' %}" />
<link
  href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@300;400&family=Oswald:wght@200;400&display=swap"
  rel="stylesheet">



{% endblock %}


{% block content %}
<main class="page-content design perfo_body">
  <!-- https://codepen.io/themustafaomar/pen/jLMPKm -->
  <div class="performance">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12 pl-0">
          <div class="content">
            <p class="title skills-title">Peşəkar bacarıqlar</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="">
    <div class="container-fluid">
      <div class="row ">
        <div class="col-md-6 main-item-first border-right border-dark">
          <div class="class-between">
            <span class="skills-title-self">Təhsil</span>
            <button class="btn btn-light" data-toggle="modal" data-target="#addEducation">Əlavə et</button>
          </div>
          {% for obj in experiences %}
          <div class="container-skills-and-education class-between">
            <div>
              <span class="skill-time">{{obj.start|date:"d/m/Y"}} </span>
              <span class="skill-time">- {{obj.end|date:"d/m/Y"}}</span>
              <br>
              <span class="skill-time">{{obj.title}}</span>
              <!-- <button class="btn btn-danger rounded-0">Delete</button> -->
            </div>
            <div>
              <i data-id="{{obj.id}}" class="icon-skill icon-skill-delete fa fa-trash-alt" data-target="#confirmDelete"
                data-toggle="modal"></i>
              <i data-id="{{obj.id}}" class="icon-skill icon-skill-edit far fa-edit" data-target="#changeEducation" data-toggle="modal"> </i>
            </div>
          </div>
          {% endfor %}
        </div>
        <div class="col-md-6 main-item-first">
          <div class="class-between">
            <span class="skills-title-self">Bacarıqlar</span>
            <button class="btn btn-light" data-target="#addSkill" data-toggle="modal">Əlavə et</button>
          </div>
          <div class="container-education">
            <div class="class-between">
              <span class="skill-time">John Doe</span>
              <span class="skill-time percent">70%</span>
            </div>
            <div class="class-between range-main">
              <div class="range-skill">
                <div class="skill-range bg-dark"></div>
              </div>
              <span>
                <i class="icon-skill icon-skill-delete fa fa-trash-alt" data-target="#confirmDelete"
                  data-toggle="modal"></i>
                <i class="icon-skill icon-skill-edit far fa-edit" data-target="#changeSkill" data-toggle="modal"></i>
              </span>
            </div>
          </div>
          <div class="container-education">
            <div class="class-between">
              <span class="skill-time">John Doe</span>
              <span class="skill-time percent">20%</span>
            </div>
            <div class="class-between range-main">
              <div class="range-skill">
                <div class="skill-range skill-2 bg-dark"></div>
              </div>
              <span>
                <i class="icon-skill icon-skill-delete fa fa-trash-alt" data-target="#confirmDelete"
                  data-toggle="modal"></i>
                <i class="icon-skill icon-skill-edit far fa-edit" data-target="#changeSkill" data-toggle="modal"></i>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>


  <!-- Modal -->
  <div class="modal fade" id="addEducation" profile-id="{{profile.id}}" tabindex="-1" role="dialog"
    aria-labelledby="addEducation" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 300px !important;">
      <div class="modal-content rounded-0 border-0">
        <p class="modal-title mb-2 bg-success p-2">Təhsil əlavə et</p>
        <div class="w-100 px-2">
          <div class="form-group">
            <label for="">Təhsilin başlama tarixi</label>
            <input type="date" class="form-control start-date">
          </div>
          <div class="form-group">
            <label for="">Təhsilin bitmə tarixi</label>
            <input type="date" class="form-control end-date">
          </div>
          <div class="form-group">
            <label for="">Bitirdiyi təhsil müəssisəsin adı</label>
            <input type="text" placeholder="nümunə: Bakı Dövlət Universiteti" class="form-control title">
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-primary rounded-0 btn-block save-experience">Yadda saxla</button>
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-warning rounded-0 btn-block" data-dismiss="modal">Ləğv et</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="changeEducation" tabindex="-1" role="dialog" aria-labelledby="addEducation"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 300px !important;">
      <div class="modal-content rounded-0 border-0">
        <p class="modal-title mb-2 bg-success p-2">Təhsil də dəyişiklik et</p>
        <div class="w-100 px-2">
          <div class="form-group">
            <label for="">Təhsilin başlama tarixi</label>
            <input type="date" class="form-control">
          </div>
          <div class="form-group">
            <label for="">Təhsilin bitmə tarixi</label>
            <input type="date" class="form-control">
          </div>
          <div class="form-group">
            <label for="">Bitirdiyi təhsil müəssisəsin adı</label>
            <input type="text" placeholder="nümunə: Bakı Dövlət Universiteti" class="form-control">
          </div>
          <div class="form-group">

            <button type="submit" class="btn btn-primary rounded-0 btn-block">Yadda saxla</button>
          </div>
          <div class="form-group">

            <button type="submit" class="btn btn-warning rounded-0 btn-block" data-dismiss="modal">Ləğv et</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="addSkill" tabindex="-1" role="dialog" aria-labelledby="addSkill" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 300px !important;">
      <div class="modal-content rounded-0 border-0">
        <p class="modal-title mb-2 bg-success p-2">Bacarıq əlavə et</p>
        <div class="w-100 px-2">
          <div class="form-group">
            <label for="">Təhsilin başlama tarixi</label>
            <input type="text" class="form-control" placeholder="Ad">
          </div>
          <div class="form-group">
            <label for="">Təhsilin bitmə tarixi</label>
            <input type="text" class="form-control" placeholder="Soyad">
          </div>
          <div class="form-group">
            <label for="" class="class-between">Göstərici nisbəti <span id="range">50%</span></label>
            <input type="range" class="form-control-range p-0">
          </div>
          <div class="form-group">

            <button type="submit" class="btn btn-primary rounded-0 btn-block">Yadda saxla</button>
          </div>
          <div class="form-group">

            <button type="submit" class="btn btn-warning rounded-0 btn-block" data-dismiss="modal">Ləğv et</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="changeSkill" tabindex="-1" role="dialog" aria-labelledby="addSkill" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 300px !important;">
      <div class="modal-content rounded-0 border-0">
        <p class="modal-title mb-2 bg-success p-2">Bacarıq da dəyişiklik</p>
        <div class="w-100 px-2">
          <div class="form-group">
            <label for="">Təhsilin başlama tarixi</label>
            <input type="text" class="form-control" placeholder="Ad">
          </div>
          <div class="form-group">
            <label for="">Təhsilin bitmə tarixi</label>
            <input type="text" class="form-control" placeholder="Soyad">
          </div>
          <div class="form-group">
            <label for="" class="class-between">Göstərici nisbəti <span id="range">50%</span></label>
            <input type="range" class="form-control-range p-0">
          </div>
          <div class="form-group">

            <button type="submit" class="btn btn-primary rounded-0 btn-block">Yadda saxla</button>
          </div>
          <div class="form-group">

            <button type="submit" class="btn btn-warning rounded-0 btn-block" data-dismiss="modal">Ləğv et</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="confirmDelete" tabindex="-1" role="dialog" aria-labelledby="addSkill" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 300px !important;">
      <div class="modal-content rounded-0 border-0">
        <p class="modal-title mb-2 bg-success p-2">Silmək istədyinizə əminsiz?</p>
        <div class="p-2">
          <button class="btn btn-block rounded-0 btn-warning" data-dismiss="modal">Davam et</button>
          <button class="btn btn-block btn-primary rounded-0" data-dismiss="modal">Ləğv et</button>
        </div>
      </div>
    </div>
  </div>

</main>
{% endblock %}


{% block scripts %}
<script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/owl.carousel.min.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
<script>
  function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
      var cookies = document.cookie.split(';');
      for (var i = 0; i < cookies.length; i++) {
        var cookie = jQuery.trim(cookies[i]);
        // Does this cookie string begin with the name we want?
        if (cookie.substring(0, name.length + 1) == (name + '=')) {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }

  $(function () {
    $(".form-control-range").mousemove(function () {
      $("#range").text($(".form-control-range").val() + "" + "%")
    });
    $(".form-control-range").change(function () {
      $("#range").text($(".form-control-range").val() + "" + "%")
    });
  });

  $(document).ready(function () {
    $('.save-experience').on("click", function () {
      modal = $(this).parents('.modal')
      data = {
        "profile": $(modal).attr('profile-id'),
        "start": $(modal).find('.start-date').val(),
        "end": $(modal).find('.end-date').val(),
        "title": $(modal).find('.title').val()
      }
      $.ajax({
        type: 'POST',
        url: '/api/experiences/',
        headers: { "X-CSRFToken": getCookie('csrftoken') },
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(data),
        success: function (data) {
          $(modal).find('.start-date').val("");
          $(modal).find('.end-date').val("");
          $(modal).find('.title').val("");
          $('#addEducation').modal("hide");
        },
        error: function (jqXhr, textStatus, errorMessage) {
          alert(errorMessage)
        }
      });
    });



  });
</script>

{% endblock %}
{% extends 'barrister/barrister-base.html' %}

{% load static %}

{% block title %}
<title>Barrister Elelktron poçt</title>
{% endblock %}

{% block links %}
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://cdn.pixabay.com/photo/2016/07/31/20/54/calendar-1559935_1280.png"
  alt="Изображение Tim Treis с сайта Pixabay " type="image/x-icon" />
<link rel="stylesheet" href="{% static 'vendor/bootstrap.min.css' %}" />
<link rel="stylesheet" href="{% static 'fontawesome/all.css' %}" />
<link rel="stylesheet" href="{% static 'vendor/owl.carousel.css' %}" />
<link rel="stylesheet" href="{% static 'vendor/owl.theme.default.min.css' %}" />
<link rel="stylesheet" href="{% static 'vendor/animate.css' %}" />
<link href="{% static 'vendor/fullcalendar-3.10.0/fullcalendar.min.css' %}" rel="stylesheet" />
<link href="{% static 'vendor/fullcalendar-3.10.0/fullcalendar.print.min.css' %}" rel="stylesheet" media="print" />
<link rel="stylesheet" href="{% static 'css/style.css' %}" />
<link rel="stylesheet" href="{% static 'css/email.css' %}" />
<link rel="stylesheet" href="{% static 'css/style2.css' %}" />

{% endblock %}



{% block content %}


<main class="page-content design">
  
  <div style="padding-left: 70px;" class="emailContent">
    
    <h1>Inbox</h1>
    <div class="container-fluid mt-4">
      <div class="row">
        <div class="col-12 col-md-4 pl-0 pr-0">
          <ul class="list-group">
            <li class="list-group-item emailFirstList emailBetweenContext">
              <span>Inbox</span>
              <span>
                <div class="input-group emailSearchPart">
                  <input type="text" class="form-control" placeholder="Search in mail" aria-label="Recipient's username"
                    aria-describedby="basic-addon2">
                  <div class="input-group-append">
                    <span class="input-group-text" id="basic-addon2"><i class="fas fa-search"></i></span>
                  </div>
                </div>
              </span>
            </li>
            <li class="list-group-item d-flex align-items-center justify-content-between">
              <div class="d-flex emailButtonGroups">
                <div class="mr-2">
                  <input type="checkbox" name="" id="checkboxMain">
                </div>
                <div class="noRounded1">
                  <i class="fas fa-trash-alt"></i>
                </div>
                <div class="noRounded2">
                  <i class="fas fa-reply"></i>
                </div>
                <div class="noRounded3">
                  <i class="fas fa-share"></i>
                </div>
                <div class="ml-2">
                  <i class="fas fa-sync-alt"></i>
                </div>
              </div>
              <div class="d-flex emailButtonGroups">
                <span>1-3/3</span>
                <div class="mx-2">
                  <i class="fas fa-angle-left"></i>
                </div>
                <div>
                  <i class="fas fa-angle-right"></i>
                </div>
              </div>
            </li>
            
          </ul>
          <div style="height: 80vh;overflow: auto;" id="mailContent">
                     
          </div>
        </div>
        <div class="col-md-8 col-12 defaultMail">
            <div class="card col-12 p-0">
              <div class="card-header align-items-center d-flex">
                <div class="emailImage">
                  MH
                </div>
                <div class="mailSubject">
                  Lorem ipsum dolor sit amet.
                </div>
              </div>
              <div class="card-body">
                <div class="list-group">
                  <div class="list-group-item">
                    Kimdən : <a href="" class="mailSender">musahesenov2@gmail.com</a>
                  </div>
                  <div class="list-group-item">
                    Başlıq : <span class="text-primary mailSubjectExpand">Lorem, ipsum dolor.</span>
                  </div>
                  <div class="list-group-item">
                    Tarix : <a href="" class="mailDate">22.02.2020</a>
                  </div>
                  <div class="list-group-item mailMovzu" style="max-height: 80vh;overflow: auto;min-height: auto;">
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Numquam temporibus omnis possimus inventore,
                     est natus illum accusamus debitis minima. Officia delectus ab dolorum expedita temporibus. Nobis id doloribus
                      ipsa saepe.Perferendis, neque ipsam dolore facere distinctio iste nostrum magni aspernatur nobis eos excepturi nemo mollitia? E
                    ius quas, aliquid impedit ipsa molestias assumenda similique delectus architecto qui ullam nihil natus vero!
                  </div>
                  <div class="list-group-item d-flex">
                    <div class="emailFiles">
                      <button class="btn btn-dark downloadButton"><i class="fas fa-download"></i></button>
                    </div>
                    
                    <!-- <div class="emailFiles d-flex">
                      <button class="btn btn-dark align-self-end mr-2 mb-2 ml-auto"><i class="fas fa-download"></i></button>
                    </div> -->
                    
                  </div>
                </div>
              </div>
            </div>
          
        </div>
        <div class="col-md-8 col-12">
          <div class="insteadMailImage col-12">
            <h1>Choose message from left to see message</h1>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
{% endblock content %}



{% block scripts %}

<script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/owl.carousel.min.js' %}"></script>
<script src="{% static 'vendor/fullcalendar-3.10.0/lib/moment.min.js' %}"></script>
<script src="{% static 'vendor/fullcalendar-3.10.0/lib/jquery.min.js' %}"></script>
<script src="{% static 'vendor/fullcalendar-3.10.0/fullcalendar.min.js' %}"></script>
<script src="{% static 'vendor/fullcalendar-3.10.0/locale/az.js' %}"></script>
<script src="{% static 'js/fullcalendar.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
<script src="{% static 'js/mailData.js' %}"></script>
<script>
  function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie !== '') {
      var cookies = document.cookie.split(';');
      for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i].trim();
        // Does this cookie string begin with the name we want?
        if (cookie.substring(0, name.length + 1) === (name + '=')) {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }

  $(document).ready(function () {
    console.log('test')
    var url = $(location).attr('hash')
    console.log('test')
    if (url.includes('access_token')) {
      console.log('true')
      var token = url.substring(url.indexOf('n=') + 2, url.indexOf('&t'))
      $.ajax({
        url: '/api/email/token/',
        headers: {
          "X-CSRFToken": getCookie('csrftoken'),
        },
        type: 'POST',
        data: {
          'token': token
        },
        success: function (data) {
          console.log(data);
        }
      });

    }
    
  });

  $(function() {
    $(".emailSidebar").addClass("active");
    if($(".emailSidebar").hasClass("active")) {
      $(".emailSubmenu").css("display", "block")
    };
    $(".emailListUl").append('<li><a href="/email/" class="inbox">Daxil olanlar(İnbox)</a></li><li><a href="#" class="drafts">Qaralama(Draft)</a></li><li><a class="deleteMessage" href="#">Zibil qutusu(Recycle bin)</a></li><li><a class="sendingMails" href="#">Göndərilənlər(Sent Mail)</a></li><li><a href="#">İmza</a></li>');
    $(".emailNavigator").attr("href","#")
  });


</script>

{% endblock scripts %}
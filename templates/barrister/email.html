{% extends 'barrister/barrister-base.html' %}

{% load static %}

{% block title %}
<title>Barrister Elelktron poçt</title>
{% endblock %}

{% block links %}
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://cdn.pixabay.com/photo/2016/07/31/20/54/calendar-1559935_1280.png"
  alt="Изображение Tim Treis с сайта Pixabay " type="image/x-icon" />
<link rel="stylesheet" href="{% static 'vendor/bootstrap.min.css' %}" />
<link rel="stylesheet" href="{% static 'fontawesome/all.css' %}" />
<link rel="stylesheet" href="{% static 'vendor/owl.carousel.css' %}" />
<link rel="stylesheet" href="{% static 'vendor/owl.theme.default.min.css' %}" />
<link rel="stylesheet" href="{% static 'vendor/animate.css' %}" />
<link href="{% static 'vendor/fullcalendar-3.10.0/fullcalendar.min.css' %}" rel="stylesheet" />
<link href="{% static 'vendor/fullcalendar-3.10.0/fullcalendar.print.min.css' %}" rel="stylesheet" media="print" />
<link rel="stylesheet" href="{% static 'css/style.css' %}" />
<link rel="stylesheet" href="{% static 'css/email.css' %}" />

{% endblock %}


{% block content %}
<main class="page-content design">
  <div style="padding-left: 70px;" class="emailContent">
    <h1>Inbox</h1>
    <div class="container-fluid mt-4">
      <div class="row">
        <div class="col-12 col-md-3 pl-0">
          <button class="btn btn-block btn-warning emailComposeButton mb-2">Compose</button>
          <ul class="list-group emailListGroup">
            <li class="list-group-item d-flex align-items-center justify-content-between emailFirstList">
              <span>Folders</span>
              <span><i class="fas fa-minus openTypes"></i></span>
            </li>
            <div class="emailTypesContainer">
              <a href="#" class="rounded-0 border-top-0 list-group-item emailBetweenContext">
                <span><i class="fas fa-inbox mr-2"></i> Inbox</span>
                <span class="badge d-flex align-items-center badge-primary">10</span>
              </a>
              <a href="#!" class="list-group-item emailBetweenContext">
                <span><i class="far fa-envelope mr-2"></i> Sent</span>
                <span class="badge d-flex align-items-center badge-success">10</span>
              </a>
              <a href="#!" class="list-group-item emailBetweenContext">
                <span><i class="far fa-file-alt mr-2"></i> Draft</span>
  
              </a>
              <a href="#!" class="list-group-item emailBetweenContext">
                <span><i class="fas fa-filter mr-2"></i> Junk</span>
  
              </a>
              <a href="#!" class="list-group-item emailBetweenContext">
                <span><i class="fas fa-trash-alt mr-2"></i> Trash</span>
                <span class="badge d-flex align-items-center badge-secondary">10</span>
              </a>
            </div>
          </ul>
          <div class="list-group emailListGroup mt-2 mb-2">
            <li class="list-group-item d-flex align-items-center justify-content-between emailFirstList">
              <span>Kinds</span>
              <span><i class="fas fa-minus openKinds"></i></span>
            </li>
            <div class="emailKindsContainer">
              <a href="#!" class="rounded-0 border-top-0 list-group-item emailBetweenContext">
                <span><i class="fas fa-circle text-danger mr-2"></i> Important</span>
  
              </a>
              <a href="#!" class="list-group-item emailBetweenContext">
                <span><i class="fas fa-circle text-primary mr-2"></i> Social</span>
  
              </a>
              <a href="#!" class="list-group-item emailBetweenContext">
                <span><i class="fas fa-circle text-warning mr-2"></i> Promotions</span>
  
              </a>
            </div>

          </div>
        </div>
        <div class="col-12  col-md-9 pl-0">
          <ul class="list-group" id="mailContent">
            <li class="list-group-item emailFirstList emailBetweenContext">
              <span>Inbox</span>
              <span>
                <div class="input-group emailSearchPart">
                  <input type="text" class="form-control" placeholder="Search in mail" aria-label="Recipient's username"
                    aria-describedby="basic-addon2">
                  <div class="input-group-append">
                    <span class="input-group-text" id="basic-addon2"><i class="fas fa-search"></i></span>
                  </div>
                </div>
              </span>
            </li>
            <li class="list-group-item d-flex align-items-center justify-content-between">
              <div class="d-flex emailButtonGroups">
                <div class="mr-2">
                  <input type="checkbox" name="" id="checkboxMain">
                </div>
                <div class="noRounded1">
                  <i class="fas fa-trash-alt"></i>
                </div>
                <div class="noRounded2">
                  <i class="fas fa-reply"></i>
                </div>
                <div class="noRounded3">
                  <i class="fas fa-share"></i>
                </div>
                <div class="ml-2">
                  <i class="fas fa-sync-alt"></i>
                </div>
              </div>
              <div class="d-flex emailButtonGroups">
                <span>1-3/3</span>
                <div class="mx-2">
                  <i class="fas fa-angle-left"></i>
                </div>
                <div>
                  <i class="fas fa-angle-right"></i>
                </div>
              </div>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>


</main>
{% endblock content %}



{% block scripts %}

<script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/owl.carousel.min.js' %}"></script>
<script src="{% static 'vendor/fullcalendar-3.10.0/lib/moment.min.js' %}"></script>
<script src="{% static 'vendor/fullcalendar-3.10.0/lib/jquery.min.js' %}"></script>
<script src="{% static 'vendor/fullcalendar-3.10.0/fullcalendar.min.js' %}"></script>
<script src="{% static 'vendor/fullcalendar-3.10.0/locale/az.js' %}"></script>
<script src="{% static 'js/fullcalendar.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
<script src="{% static 'js/mailData.js' %}"></script>
<script>
  function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie !== '') {
      var cookies = document.cookie.split(';');
      for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i].trim();
        // Does this cookie string begin with the name we want?
        if (cookie.substring(0, name.length + 1) === (name + '=')) {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }

  $(document).ready(function () {
    console.log('test')
    var url = $(location).attr('hash')
    console.log('test')
    if (url.includes('access_token')) {
      console.log('true')
      var token = url.substring(url.indexOf('n=') + 2, url.indexOf('&t'))
      $.ajax({
        url: '/api/email/token/',
        headers: {
          "X-CSRFToken": getCookie('csrftoken'),
        },
        type: 'POST',
        data: {
          'token': token
        },
        success: function (data) {
          console.log(data);
        }
      });

    }

  });
</script>

{% endblock scripts %}